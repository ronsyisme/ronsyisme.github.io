<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ton</title>
    <script type="module" crossorigin src="/ton/static/ton-thunk.js"></script>
  </head>
  <body>
    <div id="app">

      <button onclick="connect()">连接</button>
      <button onclick="disconnect()">断开连接</button>
      <button onclick="send()">发送交易</button>
      <button onclick="transfer()">Ton转换</button>
      <button onclick="query()">状态</button>
      <div id="content" style="width:100%;word-break: break-all;"></div>
    </div>

    <script>
      window.onload = function(){
        console.log("window.TON_WALLET",window.TON_WALLET);
      }
      function connect(){
        window.TON_WALLET.tonConnect();
      }
      function disconnect(){
        window.TON_WALLET.tonDisconnect();
      }
      async function send(){
        //result=true/false
        const result = await window.TON_WALLET.sendTransaction('0QCLjgB5D8IRlHN1zpgdKJA0FSnN_vkuRGo2-sFAGERpWKNr','20000000');
      }
      function transfer(){
        console.log("nanoTon",window.TON_WALLET.toNano(window.TON_WALLET.balance));
      }
      function query(){
        document.getElementById("content").innerHTML = JSON.stringify(window.TON_WALLET);
      }
    </script>
  </body>
</html>
