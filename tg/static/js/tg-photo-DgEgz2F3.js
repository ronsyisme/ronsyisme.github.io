import{h as i}from"./index-Ct1rQCU8.js";import{d as w,r as P,k as b,o as d,f as g,z as u,u as r,i as v,b as m,t as U}from"./index-DIeLhbgj.js";import"./main-C62m7gnl.js";const F="/tg/static/png/1-D-euKTPX.png",A={class:"fixed top-0 left-0 w-full h-full overscroll-contain overflow-scroll-touch bg-white"},y=["src"],E=m("canvas",{id:"myCanvas",width:"100",height:"100"},null,-1),k={class:"break-words"},f="https://api.telegram.org/bot7517531779:AAGb7zTfzsKU3is2KRNSF5YIgfg9zWHd-sE",h="https://api.telegram.org/file/bot7517531779:AAGb7zTfzsKU3is2KRNSF5YIgfg9zWHd-sE/",N=w({__name:"tg-photo",setup(x){const l=document.URL,n=P(""),p=async e=>{const{ok:o,result:t}=await i.get(f+"/getUserProfilePhotos?user_id="+e);return o&&t&&t.total_count?t.photos[0][0].file_id:""},_=async e=>{if(!e)return null;const{ok:o,result:t}=await i.get(f+"/getFile?file_id="+e);return o&&t&&t.file_path?t.file_path:""},I=e=>{const o=document.getElementById("myCanvas"),t=o.getContext("2d"),s=new Image;s.src=e,s.onload=function(){t.save(),t.beginPath(),t.arc(50,50,50,0,2*Math.PI),t.closePath(),t.clip(),t.drawImage(s,0,0,o.width,o.height),t.restore();const a=new Image;a.src=F,a.onload=function(){t.fillStyle="rgba(255,255,255,1)",t.beginPath(),t.arc(20,20,20,0,Math.PI*2),t.fill(),t.beginPath(),t.arc(20,20,20,0,Math.PI*2),t.clip(),t.drawImage(a,0,0,40,40)}}};return b(async()=>{const e=decodeURIComponent(decodeURIComponent(l));console.log("decodeUrl",e);const o=/user=\{"id":(\d+),/,t=e.match(o);if(t&&t[1]){const s=t[1];console.log("User ID:",s);const a=await p(Number(s));console.log();const c=await _(a);c&&(n.value=h+c,I(h+c))}else console.log("User ID not found.")}),(e,o)=>(d(),g("div",A,[u(" 原图： "),r(n)?(d(),g("img",{key:0,src:r(n),alt:"avatar"},null,8,y)):v("",!0),u(" 合成： "),E,m("div",k,U(r(l)),1)]))}});export{N as default};
